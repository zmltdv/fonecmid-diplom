# Дипломный проект профессии «1C-программист: с нуля до middle»
 
## Кастомизация конфигурации «Управление IT-фирмой для компании «Ваш компьютерный мастер»

### Цель дипломного проекта

Разработать и подготовить к эксплуатации новый функциональный блок в конфигурации «Управление IT-фирмой».

Вам нужно:

- реализовать новые подсистемы «Работа с заявками клиентов» и «Расчёт управленческой зарплаты» в соответствии с требованиями заказчика,
- подготовить отчёты по новой функциональности,
- оформить инструкцию по начальной настройке,
- подготовить автотест для проверки корректности работы подсистемы «Работа с заявками клиентов»,
- загрузить результат работы в новый репозиторий на GitHub.

------

### Чек-лист готовности к работе над проектом

1. Установите [платформу 1С:Предприятие 8.3.27](https://developer.1c.ru/applications/Console?state=community).
2. Скачайте и установите 1С:EDT [последней актуальной версии](https://releases.1c.ru/version_files?nick=DevelopmentTools10&ver=2024.2.5).
3. Зарегистрируйтесь на github.com и создайте форк от этого репозитория.
4. С помощью 1С:EDT клонируйте свой форк репозитория.

Если все этапы чек-листа пройдены, можете начинать работу над проектом. Успехов.

------

### Инструменты и дополнительные материалы для выполнения задания
- Скачайте Vanessa Automation из [официального гит-репозитория](https://pr-mex.github.io/vanessa-automation/dev/).

------

### Описание задания

Компания «Ваш компьютерный мастер» использует конфигурацию «Управление IT-фирмой» от стороннего поставщика. Вам поставлена задача добавить в конфигурацию модуль для работы с заявками на обслуживание клиентов и модуль для расчёта управленческой заработной платы.

Исходная версия конфигурации размещена в [этом репозитории](/fonecmid-diplom). Для доработки конфигурации нужно использовать 1C:EDT. При доработке конфигурации максимально задействуйте функциональность библиотеки стандартных подсистем.

Для добавленных объектов, реквизитов, методов используйте префикс ВКМ_. Если меняется программный код существующих методов, изменения должны быть выделены комментариями.

Все добавленные объекты должны быть размещены в новой служебной подсистеме ВКМ_ДобавленныеОбъекты. В добавленных объектах не должно быть ошибок, выявляемых встроенным механизмом проверки 1C:EDT.

Для передачи результата изменённую конфигурацию загрузите в отдельный репозиторий на [github.com](https://github.com). Чтобы результаты работы можно было проверить, репозиторий должен быть публичным.

Вместе с результатами работы должны быть переданы инструкция по начальной настройке новой подсистемы и сценарий для автоматизированного тестирования модуля работы с заявками клиентов.

В блок Releases репозитория должен быть добавлен dt-файл демонстрационной базы с введёнными тестовыми данными, которые показывают работу всех механизмов системы.

------

### Подробные требования к подсистемам

- [Работа с заявками клиентов](tasks/tickets.md).
- [Расчёт управленческой зарплаты](tasks/hrm.md).
- [Отчёты](tasks/reports.md).
- [Инструкция по начальной настройке](tasks/docs.md).
- [Тестирование](tasks/testing.md).

------

### Дорожная карта (roadmap)

Работа над проектом рассчитана на один месяц. Для планирования своего времени рекомендуем опираться на дорожную карту. Придерживайтесь указанного разделения проекта на этапы и задачи исполнителя.

- 1-я неделя. Разработка подсистемы «Работа с заявками клиентов».
- 2-я неделя. Разработка подсистемы «Расчёт управленческой зарплаты».
- 3-я неделя. Разработка отчётов, автотеста и инструкции по начальной настройке.
- 4-я неделя. Оформление репозитория, демонстрационной базы, отправка проекта на проверку дипломному руководителю.
- 5-я неделя. Получение обратной связи от руководителя и доработка проекта с повторной проверкой при необходимости.

------

### Правила сдачи работы

Решение нужно передать в виде ссылки на публичный репозиторий на github.com, в котором размещены:

1. Исходный код доработанной конфигурации в формате 1C:EDT.
2. Сценарий автотеста и инструкция по запуску автотеста.
3. Инструкция по начальной настройке доработанной конфигурации.
4. В списке релизов файл с демонстрационной базой в формате *dt.

------

### Критерии оценки

Зачёт по дипломной работе можно получить, если работа соответствует критериям:

1. Репозиторий содержит исходный код конфигурации в формате 1C:EDT.
2. Функциональность конфигурации не имеет существенных ошибок и соответствует техническому заданию.
3. В добавленных объектах нет ошибок, выявляемых проверками 1C:EDT с набором плагинов и составом проверок по умолчанию.
4. Автотест запускается и соответствует техническому заданию.
5. Инструкция по начальному запуску описывает шаги, необходимые для начала использования доработанной конфигурации.
6. Демонстрационная база содержит достаточный набор данных, соответствующий требованиям.

------

## Инструкция по начальной настройке
Данный раздел описывает последовательность действий, необходимых для первичной настройки доработанной конфигурации и подготовки системы к работе.

### 1. Настройка Telegram-уведомлений

Для получения автоматических уведомлений о событиях в системе необходимо выполнить настройку Telegram-бота.

1. С помощью пользователя @BotFather создайте нового Telegram-бота.
2. После создания бота получите и сохраните токен доступа.
3. Создайте групповую беседу в Telegram, предназначенную для получения уведомлений.
4. Добавьте созданного бота в группу и предоставьте ему права на отправку сообщений.
5. Определите идентификатор группы (chat_id), который представляет собой отрицательное числовое значение.

В дальнейшем бот будет использоваться системой 1С для отправки уведомлений о создании и обработке заявок.

### 2. Заполнение параметров в конфигурации 1С

После настройки Telegram необходимо указать соответствующие параметры в системе 1С.

В разделе **Добавленные объекты - Сервис** заполните следующие значения:

- `ВКМ_ТокенУправленияТелеграмБотом` — токен, полученный при создании Telegram-бота;
- `ВКМ_ИдентификаторГруппыДляОповещения` — идентификатор Telegram-группы;
- «Номенклатура абонентской платы» — элемент справочника номенклатуры, используемый для учёта абонентского обслуживания;
- «Номенклатура работы специалиста» — элемент справочника номенклатуры, применяемый при учёте выполненных работ специалистов.

Корректное заполнение констант является обязательным условием для корректной работы подсистем.

### 3. Настройка условий оплаты труда

Для расчёта управленческой заработной платы необходимо заполнить регистр сведений **«Условия оплаты труда»**.

В регистре указываются параметры расчёта для различных категорий сотрудников:

- для специалистов — процент от стоимости выполненных работ или продаж;
- для административных и вспомогательных сотрудников — фиксированный оклад.

Записи в регистре должны быть актуальны по периоду и соответствовать фактическим условиям оплаты труда сотрудников.

### 4. Настройка графиков работы сотрудников

Для корректного расчёта заработной платы и учёта рабочего времени необходимо создать и заполнить графики работы.

1. Создайте новый график в справочнике графиков работы.
2. Используйте обработку **«Заполнение графика работы»**:
   - укажите период, на который формируется график;
   - задайте номера выходных дней недели (например: 6, 7);
   - выберите ранее созданный график.
3. Проверьте корректность заполнения календаря рабочих и выходных дней.

Графики работы должны быть назначены сотрудникам в кадровых данных.

### 5. Создание пользователей и назначение ролей

Для работы сотрудников в системе необходимо создать пользователей и назначить им соответствующие роли.

1. Создайте пользователей в разделе администрирования.
2. Свяжите пользователей с физическими лицами или сотрудниками.
3. Назначьте роли в зависимости от выполняемых функций:
   - **Менеджер** — работа с договорами и заявками клиентов;
   - **Специалист** — выполнение и фиксация работ по заявкам;
   - **Бухгалтер** — формирование актов и расчёт начислений;
   - **Кадровик-расчётчик** — настройка и контроль расчёта заработной платы.

Корректное распределение ролей обеспечивает доступ пользователей только к необходимому функционалу.

### 6. Настройки для менеджеров по работе с клиентами

Для использования механизма абонентского обслуживания менеджерам необходимо корректно заполнять документы **«Договор с клиентом»**.

В документе требуется:

- выбрать вид договора — «Абонентское обслуживание»;
- указать период действия договора;
- задать стоимость часа работ специалиста;
- указать размер ежемесячной абонентской платы.

На основании данных договора система будет автоматически формировать расчёты и документы.

### 7. Настройки и действия для бухгалтерии

Для формирования первичных документов используется обработка **«Массовое создание актов»**.

Порядок работы:

1. Откройте обработку формирования актов.
2. Укажите период, за который необходимо сформировать документы.
3. Выполните команду формирования.
4. Проверьте корректность созданных актов перед их проведением.

Обработка предназначена для упрощения массового документооборота.

### 8. Проверка корректности работы системы

После завершения всех настроек рекомендуется выполнить тестовую проверку.

1. Создайте документ **«Обслуживание клиента»**.
2. Заполните основные реквизиты и проведите документ.
3. Убедитесь, что в Telegram-группу было отправлено уведомление.
4. Проверьте корректность заполнения данных в учётных регистрах.

Успешное выполнение данных шагов подтверждает готовность системы к эксплуатации.

------

## Инструкция по запуску сценариев автоматизированного тестирования

Данный раздел описывает порядок подготовки информационной базы и запуска сценариев автоматизированного тестирования с использованием инструмента Vanessa Automation.

### 1. Загрузка тестовой информационной базы

Для выполнения тестирования необходимо использовать демонстрационную базу данных.

1. Перейдите в раздел **Releases** репозитория проекта.
2. Скачайте файл демонстрационной базы данных в формате `*.dt`.
3. Запустите **Конфигуратор** 1С.
4. Выберите пункт меню: **Администрирование → Загрузить информационную базу**.
5. Укажите путь к файлу выгрузки и выполните восстановление базы.

После загрузки база будет содержать подготовленные тестовые данные, необходимые для выполнения сценариев.

### 2. Подготовка файлов автоматизированного тестирования

Для корректной работы тестов необходимо подготовить файловую структуру.

1. Создайте отдельный каталог на локальном компьютере.
2. Скопируйте в данный каталог:
   - все файлы сценариев автоматизированного тестирования;
   - эталонный файл отчёта **«Анализ выставленных актов»**, используемый для сравнения результатов.

Рекомендуется размещать все связанные файлы в одном каталоге для упрощения настройки путей.

### 3. Установка и подготовка Vanessa Automation

Для запуска сценариев используется инструмент Vanessa Automation.

1. Перейдите в официальный репозиторий Vanessa Automation.
2. Скачайте **single-версию** обработки.
3. Сохраните файл `vanessa-automation-single.epf` в заранее подготовленном каталоге.

Использование single-версии позволяет запускать тесты без дополнительной установки расширений.

### 4. Подготовка пользователя для выполнения тестов

Перед запуском автоматизированных сценариев необходимо отключить защитные механизмы для тестового пользователя.

1. Запустите конфигурацию в режиме **Конфигуратора**.
2. Откройте раздел **Администрирование → Пользователи**.
3. Выберите пользователя **«Администратор»**.
4. Снимите флаг **«Защита от опасных действий»**.
5. Сохраните изменения.

Данная настройка необходима для корректного выполнения сценариев без прерываний.

### 5. Настройка параметров запуска 1С

Для запуска сценариев автоматизированного тестирования необходимо задать специальные параметры запуска.

В свойствах ярлыка запуска 1С укажите следующие параметры:
     ```
/TestManager /N Администратор /P "" /Execute "<полный_путь>/vanessa-automation-single.epf"
     ```

Где `<полный_путь>` — абсолютный путь к файлу обработки Vanessa Automation.

### 6. Запуск информационной базы в режиме Предприятия

1. Запустите информационную базу в режиме **1С:Предприятие** с указанными параметрами.
2. При появлении уведомления подтвердите использование внешней компоненты **VanessaExt**.
3. Дождитесь полной загрузки интерфейса Vanessa Automation.

После запуска система будет готова к выполнению тестов.

### 7. Загрузка сценариев тестирования

В интерфейсе Vanessa Automation выполните следующие действия:

1. Перейдите на вкладку **«Добро пожаловать!»**.
2. Нажмите кнопку **«Открыть папку»**.
3. Укажите каталог, содержащий подготовленные сценарии автоматизированного тестирования.
4. Убедитесь, что сценарии корректно отображаются в списке.

### 8. Запуск выполнения сценариев

Для начала тестирования:

1. Нажмите кнопку **«Выполнить»**.
2. Дождитесь завершения выполнения всех сценариев.
3. В процессе выполнения следите за журналом сообщений и статусом тестов.

Время выполнения зависит от количества сценариев и объёма тестовых данных.

### 9. Анализ результатов тестирования

По завершении выполнения сценариев:

- при успешном прохождении всех тестов отображается сообщение об успешном завершении;
- при наличии ошибок в журнале будут зафиксированы сообщения с описанием проблем.

В случае обнаружения ошибок рекомендуется сохранить логи выполнения и использовать их для анализа и исправления выявленных несоответствий.

